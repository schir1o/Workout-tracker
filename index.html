<!DOCTYPE html>

<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#000000">
<title>Darios Gym</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}
body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",system-ui,sans-serif;background:#000;color:#fff;padding:0;margin:0;overscroll-behavior:none;min-height:100vh}
.app{min-height:100vh;display:flex;flex-direction:column;background:#000}

/* Header */
.header{background:linear-gradient(135deg,#007AFF,#005AD5);padding:16px;padding-top:calc(20px + env(safe-area-inset-top));position:fixed;top:0;left:0;right:0;z-index:100;box-shadow:0 2px 20px rgba(0,0,0,0.5)}
.header-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}
.header h1{font-size:28px;font-weight:800;letter-spacing:-0.5px;text-shadow:0 2px 4px rgba(0,0,0,0.2)}
.settings-btn{width:40px;height:40px;background:rgba(255,255,255,0.2);border:none;border-radius:12px;color:#fff;font-size:20px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.2s}
.settings-btn:active{transform:scale(0.9);background:rgba(255,255,255,0.3)}

/* Navigation */
.nav{display:flex;gap:8px;align-items:center}
.nav-btn{background:rgba(255,255,255,0.15);backdrop-filter:blur(10px);border:none;color:#fff;padding:12px;border-radius:12px;font-size:20px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;min-width:48px;min-height:48px;transition:all 0.2s}
.nav-btn:active{background:rgba(255,255,255,0.25);transform:scale(0.95)}
.date-btn{flex:1;text-align:center;font-size:16px;font-weight:600;padding:12px 20px}

/* Content */
.content{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;padding:16px;padding-top:calc(150px + env(safe-area-inset-top));padding-bottom:20px;background:#000}

/* Cards & Exercises */
.exercise{background:#1c1c1e;border-radius:16px;padding:14px;margin-bottom:14px;box-shadow:0 2px 10px rgba(0,0,0,0.3);animation:fadeIn 0.3s}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.exercise-header{display:flex;align-items:center;margin-bottom:14px;gap:10px}
.exercise-name{font-size:18px;font-weight:700;flex:1;letter-spacing:-0.3px}
.muscle-tag{background:linear-gradient(135deg,#007AFF,#005AD5);padding:5px 12px;border-radius:20px;font-size:12px;font-weight:600;white-space:nowrap;box-shadow:0 2px 8px rgba(0,122,255,0.3)}
.delete-btn{background:linear-gradient(135deg,#FF453A,#FF1744);border:none;color:#fff;width:38px;height:38px;border-radius:12px;font-size:20px;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 8px rgba(255,69,58,0.3);transition:all 0.2s}
.delete-btn:active{transform:scale(0.9)}

/* Sets */
.set{display:grid;grid-template-columns:40px 1fr 75px 48px;gap:8px;align-items:center;padding:10px;background:#2c2c2e;border-radius:12px;margin-bottom:8px;transition:all 0.2s}
.set.done{background:linear-gradient(135deg,rgba(48,209,88,0.15),rgba(52,199,89,0.1));border:1px solid #30D158;box-shadow:0 2px 10px rgba(48,209,88,0.2)}
.set-num{width:40px;height:40px;background:linear-gradient(135deg,#007AFF,#005AD5);border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:16px;box-shadow:0 2px 8px rgba(0,122,255,0.3)}
.set.done .set-num{background:linear-gradient(135deg,#30D158,#34C759);box-shadow:0 2px 8px rgba(52,199,89,0.3)}
.input{background:#000;border:2px solid #3a3a3c;border-radius:10px;padding:10px;color:#fff;font-size:17px;font-weight:600;text-align:center;width:100%;-webkit-appearance:none;transition:all 0.2s}
.input:focus{border-color:#007AFF;outline:none;box-shadow:0 0 0 3px rgba(0,122,255,0.2)}
.check-btn{width:48px;height:44px;border-radius:12px;background:#2c2c2e;border:2px solid #3a3a3c;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:24px;transition:all 0.2s}
.check-btn.checked{background:linear-gradient(135deg,#30D158,#34C759);border-color:#30D158;color:#fff;box-shadow:0 2px 8px rgba(52,199,89,0.3);animation:checkPop 0.3s}
@keyframes checkPop{0%{transform:scale(1)}50%{transform:scale(1.2)}100%{transform:scale(1)}}

/* Empty State */
.empty{text-align:center;padding:60px 20px;color:#8E8E93}
.empty-icon{font-size:48px;margin-bottom:16px;opacity:0.5}
.empty-text{font-size:18px;font-weight:600;margin-bottom:8px}
.empty small{display:block;margin-top:4px;font-size:14px;opacity:0.7}

/* Add Button */
.add-btn{width:100%;padding:16px;background:linear-gradient(135deg,#007AFF,#005AD5);border:none;border-radius:14px;color:#fff;font-size:17px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;margin-top:20px;box-shadow:0 4px 15px rgba(0,122,255,0.3);transition:all 0.2s}
.add-btn:active{transform:scale(0.98);box-shadow:0 2px 8px rgba(0,122,255,0.3)}

/* Modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,0.95);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);z-index:999;display:none;align-items:flex-end;padding:0}
.modal.open{display:flex}
.modal-content{background:#1c1c1e;border-radius:24px 24px 0 0;padding:24px;width:100%;max-height:85vh;overflow-y:auto;-webkit-overflow-scrolling:touch;padding-bottom:calc(24px + env(safe-area-inset-bottom));animation:slideUp 0.3s}
@keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}
.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}
.modal h3{font-size:24px;font-weight:700}
.close-modal{width:32px;height:32px;background:#3a3a3c;border:none;border-radius:50%;color:#fff;font-size:18px;display:flex;align-items:center;justify-content:center;cursor:pointer}
.form-group{margin-bottom:20px}
.label{display:block;margin-bottom:8px;font-size:13px;font-weight:600;color:#8E8E93;text-transform:uppercase;letter-spacing:0.5px}
input[type=‚Äútext‚Äù],input[type=‚Äúnumber‚Äù],input[type=‚Äúpassword‚Äù],select{width:100%;padding:14px;background:#2c2c2e;border:2px solid #3a3a3c;border-radius:12px;color:#fff;font-size:16px;font-weight:500;-webkit-appearance:none;transition:all 0.2s}
input:focus,select:focus{border-color:#007AFF;outline:none;box-shadow:0 0 0 3px rgba(0,122,255,0.1)}
select{cursor:pointer;background-image:url(‚Äúdata:image/svg+xml;charset=UTF-8,%3csvg xmlns=‚Äòhttp://www.w3.org/2000/svg‚Äô viewBox=‚Äò0 0 24 24‚Äô fill=‚Äònone‚Äô stroke=‚Äô%238E8E93‚Äô stroke-width=‚Äò2‚Äô stroke-linecap=‚Äòround‚Äô stroke-linejoin=‚Äòround‚Äô%3e%3cpolyline points=‚Äò6 9 12 15 18 9‚Äô%3e%3c/polyline%3e%3c/svg%3e‚Äù);background-repeat:no-repeat;background-position:right 12px center;background-size:20px;padding-right:40px}
.modal-btn{width:100%;padding:16px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;margin-bottom:10px;transition:all 0.2s}
.modal-btn.primary{background:linear-gradient(135deg,#007AFF,#005AD5);color:#fff;box-shadow:0 4px 15px rgba(0,122,255,0.3)}
.modal-btn.secondary{background:#3a3a3c;color:#fff}
.modal-btn.danger{background:linear-gradient(135deg,#FF453A,#FF1744);color:#fff;box-shadow:0 4px 15px rgba(255,69,58,0.3)}
.modal-btn.success{background:linear-gradient(135deg,#30D158,#34C759);color:#fff;box-shadow:0 4px 15px rgba(52,199,89,0.3)}
.modal-btn:active{transform:scale(0.98)}

/* Settings Items */
.settings-section{margin-bottom:24px}
.settings-title{font-size:13px;font-weight:600;color:#8E8E93;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:12px}
.settings-item{background:#2c2c2e;border-radius:12px;padding:16px;margin-bottom:10px;display:flex;align-items:center;gap:12px;cursor:pointer;transition:all 0.2s}
.settings-item:active{background:#3a3a3c}
.settings-icon{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:20px}
.settings-icon.export{background:linear-gradient(135deg,#5E5CE6,#BF5AF2)}
.settings-icon.import{background:linear-gradient(135deg,#FF9500,#FF6200)}
.settings-icon.github{background:linear-gradient(135deg,#30D158,#34C759)}
.settings-info{flex:1}
.settings-name{font-size:16px;font-weight:600;margin-bottom:2px}
.settings-desc{font-size:13px;color:#8E8E93}
.settings-arrow{color:#3a3a3c;font-size:18px}

input[type=‚Äúdate‚Äù]{position:absolute;opacity:0;pointer-events:none;left:-9999px}

/* Responsive */
@media (max-width:375px){
.header h1{font-size:24px}
.set{grid-template-columns:36px 1fr 65px 44px;gap:6px}
.input{font-size:15px;padding:8px}
}
</style>

</head>
<body>
<div class="app">
<div class="header">
<div class="header-top">
<h1>üí™ Darios Gym</h1>
<button class="settings-btn" onclick="openSettings()">‚öôÔ∏è</button>
</div>
<div class="nav">
<button class="nav-btn" onclick="cd(-1)">‚Äπ</button>
<input type="date" id="di" onchange="sd(this.value)">
<button class="nav-btn date-btn" onclick="$('di').style.pointerEvents='auto';$('di').click();$('di').style.pointerEvents='none'" id="dd"></button>
<button class="nav-btn" onclick="cd(1)">‚Ä∫</button>
</div>
</div>

<div class="content" id="ex"></div>
</div>

<!-- Add Exercise Modal -->

<div class="modal" id="am" onclick="if(event.target.id=='am')cm('am')">
<div class="modal-content">
<div class="modal-header">
<h3>Neue √úbung</h3>
<button class="close-modal" onclick="cm('am')">√ó</button>
</div>
<div class="form-group">
<label class="label">Name</label>
<input type="text" id="nn" placeholder="z.B. Bankdr√ºcken" autocomplete="off">
</div>
<div class="form-group">
<label class="label">S√§tze</label>
<input type="number" id="ns" value="3" min="1" max="10" inputmode="numeric">
</div>
<div class="form-group">
<label class="label">Wiederholungen</label>
<input type="text" id="nr" value="8-12" placeholder="8-12" autocomplete="off">
</div>
<div class="form-group">
<label class="label">Typ</label>
<select id="nt">
<option value="kg">Gewicht (kg)</option>
<option value="m">Distanz (m)</option>
<option value="min">Zeit (min)</option>
</select>
</div>
<div class="form-group">
<label class="label">Muskelgruppe</label>
<select id="nm">
<option value="Brust">Brust</option>
<option value="R√ºcken">R√ºcken</option>
<option value="Beine">Beine</option>
<option value="Schultern">Schultern</option>
<option value="Arme">Arme</option>
<option value="Bauch">Bauch</option>
<option value="Cardio">Cardio</option>
<option value="Andere">Andere</option>
</select>
</div>
<button class="modal-btn primary" onclick="ae()">√úbung hinzuf√ºgen</button>
<button class="modal-btn secondary" onclick="cm('am')">Abbrechen</button>
</div>
</div>

<!-- Settings Modal -->

<div class="modal" id="sm" onclick="if(event.target.id=='sm')cm('sm')">
<div class="modal-content">
<div class="modal-header">
<h3>Einstellungen</h3>
<button class="close-modal" onclick="cm('sm')">√ó</button>
</div>
<div class="settings-section">
<div class="settings-title">Daten</div>
<div class="settings-item" onclick="xp()">
<div class="settings-icon export">üì§</div>
<div class="settings-info">
<div class="settings-name">Export</div>
<div class="settings-desc">Trainigsdaten als JSON exportieren</div>
</div>
<div class="settings-arrow">‚Ä∫</div>
</div>
<div class="settings-item" onclick="im()">
<div class="settings-icon import">üì•</div>
<div class="settings-info">
<div class="settings-name">Import</div>
<div class="settings-desc">Trainingsdaten aus JSON importieren</div>
</div>
<div class="settings-arrow">‚Ä∫</div>
</div>
</div>
<div class="settings-section">
<div class="settings-title">Synchronisation</div>
<div class="settings-item" onclick="cs()">
<div class="settings-icon github">‚òÅÔ∏è</div>
<div class="settings-info">
<div class="settings-name">GitHub Sync</div>
<div class="settings-desc">${localStorage.getItem('ght')?'‚úÖ Aktiviert':'Automatische Synchronisation einrichten'}</div>
</div>
<div class="settings-arrow">‚Ä∫</div>
</div>
</div>
</div>
</div>

<script>
const $=id=>document.getElementById(id);
let dt=new Date().toISOString().split('T')[0];
let w={};

// Load/Save
function l(){try{w=JSON.parse(localStorage.getItem('w'))||{}}catch{}}
function s(){localStorage.setItem('w',JSON.stringify(w));if(localStorage.getItem('ght'))ghs()}

// Date
function fd(){
const d=new Date(dt+'T12:00');
const days=['So','Mo','Di','Mi','Do','Fr','Sa'];
const mo=days[d.getDay()];
const dd=d.getDate().toString().padStart(2,'0');
const mm=(d.getMonth()+1).toString().padStart(2,'0');
$('dd').innerHTML=`<div style="font-size:12px;opacity:0.8;margin-bottom:2px">${mo}</div>${dd}.${mm}.${d.getFullYear()}`;
$('di').value=dt;
}

function cd(n){
const d=new Date(dt+'T12:00');
d.setDate(d.getDate()+n);
dt=d.toISOString().split('T')[0];
fd();r();
}

function sd(v){dt=v;fd();r()}

// Render
function r(){
const k=dt;
const d=w[k];
let h='';
if(!d||!d.e||d.e.length===0){
h=`<div class="empty">
<div class="empty-icon">üèãÔ∏è‚Äç‚ôÇÔ∏è</div>
<div class="empty-text">Noch keine √úbungen</div>
<small>Starte dein Training mit dem Button unten</small>
</div>`;
}else{
d.e.forEach((x,i)=>{
const tp=x.t||'kg';
const ph=tp==='m'?'Meter':tp==='min'?'Min':'kg';
const ph2=tp==='kg'?'Wdh':'Zeit';
h+=`<div class="exercise">
<div class="exercise-header">
<div class="exercise-name">${x.n}</div>
<div class="muscle-tag">${x.m||'Andere'}</div>
<button class="delete-btn" onclick="if(confirm('√úbung wirklich l√∂schen?'))re(${i})">√ó</button>
</div>`;
x.s.forEach((s,j)=>{
h+=`<div class="set ${s.d?'done':''}">
<div class="set-num">${j+1}</div>
<input class="input" placeholder="${ph}" value="${s.w||''}" onchange="us(${i},${j},'w',this.value)" inputmode="${tp==='kg'?'decimal':'numeric'}">
<input class="input" placeholder="${ph2}" value="${s.r||''}" onchange="us(${i},${j},'r',this.value)" inputmode="numeric">
<button class="check-btn ${s.d?'checked':''}" onclick="tg(${i},${j})">${s.d?'‚úì':''}</button>
</div>`;
});
h+=`</div>`;
});
}
h+=`<button class="add-btn" onclick="$('am').classList.add('open')">‚ûï Neue √úbung</button>`;
$('ex').innerHTML=h;
}

// Update Set
function us(i,j,f,v){
const k=dt;
if(!w[k])w[k]={e:[]};
if(w[k].e[i]&&w[k].e[i].s[j]){
w[k].e[i].s[j][f]=v;
s();
}
}

// Toggle Done
function tg(i,j){
const k=dt;
if(w[k]&&w[k].e[i]&&w[k].e[i].s[j]){
w[k].e[i].s[j].d=!w[k].e[i].s[j].d;
s();r();
}
}

// Add Exercise
function ae(){
const n=$('nn').value.trim();
const st=parseInt($('ns').value)||3;
const rp=$('nr').value||'8-12';
const tp=$('nt').value||'kg';
const mg=$('nm').value||'Andere';
if(n){
const k=dt;
if(!w[k])w[k]={e:[]};
w[k].e.push({n,r:rp,t:tp,m:mg,s:Array(st).fill().map(()=>({w:'',r:'',d:0}))});
$('nn').value='';$('ns').value='3';$('nr').value='8-12';$('nt').value='kg';$('nm').value='Brust';
cm('am');s();r();
}
}

// Remove Exercise
function re(i){
const k=dt;
if(w[k]&&w[k].e){
w[k].e.splice(i,1);
if(w[k].e.length===0)delete w[k];
s();r();
}
}

// Modal Functions
function cm(i){$(i).classList.remove('open')}
function openSettings(){$('sm').classList.add('open')}

// Export
function xp(){
cm('sm');
const d=JSON.stringify(w,null,2);
const b=new Blob([d],{type:'application/json'});
const u=URL.createObjectURL(b);
const a=document.createElement('a');
a.href=u;
a.download=`gym-${dt}.json`;
a.click();
}

// Import
function im(){
cm('sm');
const i=document.createElement('input');
i.type='file';
i.accept='.json';
i.onchange=e=>{
const r=new FileReader();
r.onload=ev=>{
try{
w=JSON.parse(ev.target.result);
s();r();alert('‚úÖ Import erfolgreich!');
}catch{alert('‚ùå Fehler beim Import')}
};
r.readAsText(e.target.files[0]);
};
i.click();
}

// GitHub Dialog
function cs(){
cm('sm');
const m=document.createElement('div');
m.className='modal open';
m.onclick=e=>{if(e.target===m)m.remove()};
m.innerHTML=`<div class="modal-content">
<div class="modal-header">
<h3>GitHub Sync</h3>
<button class="close-modal" onclick="this.parentElement.parentElement.parentElement.remove()">√ó</button>
</div>
<div class="form-group"><label class="label">Token</label><input type="password" id="gt" placeholder="ghp_..." value="${localStorage.getItem('ght')||''}" autocomplete="off"></div>
<div class="form-group"><label class="label">Username</label><input type="text" id="gu" placeholder="dein-username" value="${localStorage.getItem('ghu')||''}" autocomplete="off"></div>
<div class="form-group"><label class="label">Repository</label><input type="text" id="gr" placeholder="Workout-tracker" value="${localStorage.getItem('ghr')||'Workout-tracker'}" autocomplete="off"></div>
<button class="modal-btn primary" onclick="gss()">Speichern & Aktivieren</button>
${localStorage.getItem('ght')?'<button class="modal-btn success" onclick="ghl().then(()=>{r();alert(\'‚úÖ Von GitHub geladen\')})">Von GitHub laden</button>':''}
${localStorage.getItem('ght')?'<button class="modal-btn danger" onclick="if(confirm(\'GitHub Sync wirklich deaktivieren?\')){localStorage.removeItem(\'ght\');localStorage.removeItem(\'ghu\');localStorage.removeItem(\'ghr\');alert(\'Deaktiviert\');this.parentElement.parentElement.remove()}">Deaktivieren</button>':''}
<button class="modal-btn secondary" onclick="this.parentElement.parentElement.remove()">Abbrechen</button>
</div>`;
document.body.appendChild(m);
}

function gss(){
const t=$('gt').value,u=$('gu').value,r=$('gr').value;
if(t&&u){
localStorage.setItem('ght',t);
localStorage.setItem('ghu',u);
localStorage.setItem('ghr',r);
ghl().then(()=>{r();ghs()});
alert('‚úÖ Aktiviert');
document.querySelector('.modal').remove();
}
}

async function ghs(){
const t=localStorage.getItem('ght'),u=localStorage.getItem('ghu'),r=localStorage.getItem('ghr')||'Workout-tracker';
if(!t||!u)return;
try{
const d=btoa(unescape(encodeURIComponent(JSON.stringify({w,d:new Date()}))));
const s=await gsha();
await fetch(`https://api.github.com/repos/${u}/${r}/contents/data.json`,{
method:'PUT',
headers:{'Authorization':`token ${t}`},
body:JSON.stringify({message:`Update ${new Date().toLocaleString('de')}`,content:d,sha:s})
});
}catch(e){console.log('GitHub save error:',e)}
}

async function gsha(){
const t=localStorage.getItem('ght'),u=localStorage.getItem('ghu'),r=localStorage.getItem('ghr')||'Workout-tracker';
try{
const res=await fetch(`https://api.github.com/repos/${u}/${r}/contents/data.json`,{
headers:{'Authorization':`token ${t}`}
});
if(res.ok)return(await res.json()).sha;
}catch{}
}

async function ghl(){
const t=localStorage.getItem('ght'),u=localStorage.getItem('ghu'),r=localStorage.getItem('ghr')||'Workout-tracker';
if(!t||!u)return;
try{
const res=await fetch(`https://api.github.com/repos/${u}/${r}/contents/data.json`,{
headers:{'Authorization':`token ${t}`}
});
if(res.ok){
const d=await res.json();
const c=JSON.parse(decodeURIComponent(escape(atob(d.content))));
if(c.w){
w=c.w;
localStorage.setItem('w',JSON.stringify(w));
console.log('‚úÖ Von GitHub geladen');
}
}else if(res.status===404){
console.log('üìù Erstelle neue data.json mit leeren Daten');
w={};
await ghs();
}
}catch(e){console.log('GitHub load error:',e)}
}

// Init
fd();
if(localStorage.getItem('ght')){
ghl().then(()=>r());
}else{
l();
r();
}

// iOS optimizations
document.addEventListener('touchmove',e=>{if(e.scale!==1)e.preventDefault()},{passive:false});
</script>

</body>
</html>